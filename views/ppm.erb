<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="JA">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=ISO-2022-JP"/>
  <title>類似画像検索</title>
</head>

<body bgcolor="white" text="black">

  <h1 align="center">検索結果</h1>
  <hr align="center" noshade width="80%"/>
  <div align="center">

<%= p "入力されたppmキーワードは"%>
<%= @ppm %>

<%# RGBのピクセル情報を取得し、変数に格納する %>
<% width = scr.columns %>
<% hight = scr.rows %>
<% all_p = width * hight %>

<% pixels = scr.get_pixels(0, 0, scr.columns, scr.rows) %>
<% all_r = all_g = all_b = 0 %>
<% for pi in 0...all_p %>
  <% all_r += pixels[pi].red %>
  <% all_g += pixels[pi].green %>
  <% all_b += pixels[pi].blue %>
<% end %>

<% pix_clo = all_p * 256 * 256.0 %>
<%= r = all_r / pix_clo %>
<%= @g = all_g / pix_clo %>
<%= @b = all_b / pix_clo %>

<%#= p r %>
<%#= p g %>
<%#= p b %>
<%# データベースに保存する %>
<% images = Image.new %>
<% images.r = r %>
<%# images.g = @g %>
<%# images.b = @b %>

    <%# 類似度別にソートする %>

    <%# 結果を表示する %>
